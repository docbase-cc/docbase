// This file is auto-generated by @hey-api/openapi-ts

export type DifyKnowledgeResponseRecordSchema = {
    text: string;
    score: number;
    title: string;
    metadata?: unknown;
};

export type DifyKnowledgeRequestSchema = {
    knowledge_id: string;
    query: string;
    retrieval_setting: {
        top_k: number;
        score_threshold: number;
    };
};

export type SearchResult = {
    hash: string;
    paths: Array<string>;
    text: string;
};

export type SearchResults = Array<SearchResult>;

export type SearchParam = {
    /**
     * 搜索查询内容
     */
    q?: string;
    /**
     * 分页偏移量
     */
    offset?: number;
    /**
     * 每页限制数量
     */
    limit?: number;
    /**
     * 需要高亮的属性数组
     */
    attributesToHighlight?: Array<string>;
    /**
     * 高亮前缀标签
     */
    highlightPreTag?: string;
    /**
     * 高亮后缀标签
     */
    highlightPostTag?: string;
    /**
     * 需要裁剪的属性数组
     */
    attributesToCrop?: Array<string>;
    /**
     * 裁剪长度
     */
    cropLength?: number;
    /**
     * 裁剪标记
     */
    cropMarker?: string;
    /**
     * 过滤条件
     */
    filter?: string | Array<string | Array<string>>;
    /**
     * 排序条件数组
     */
    sort?: Array<string>;
    /**
     * 分面搜索字段数组
     */
    facets?: Array<string>;
    /**
     * 需要检索的属性数组
     */
    attributesToRetrieve?: Array<string>;
    /**
     * 是否显示匹配位置
     */
    showMatchesPosition?: boolean;
    /**
     * 匹配策略
     */
    matchingStrategy?: 'all' | 'last' | 'frequency';
    /**
     * 每页命中数
     */
    hitsPerPage?: number;
    /**
     * 页码
     */
    page?: number;
    /**
     * 分面名称
     */
    facetName?: string;
    /**
     * 分面查询条件
     */
    facetQuery?: string;
    /**
     * 向量数组
     */
    vector?: Array<number> | null;
    /**
     * 是否显示排名分数
     */
    showRankingScore?: boolean;
    /**
     * 是否显示排名分数详情
     */
    showRankingScoreDetails?: boolean;
    /**
     * 排名分数阈值
     */
    rankingScoreThreshold?: number;
    /**
     * 搜索字段数组
     */
    attributesToSearchOn?: Array<string> | null;
    /**
     * 去重字段
     */
    distinct?: string;
    /**
     * 是否检索向量
     */
    retrieveVectors?: boolean;
    /**
     * 语言区域数组
     */
    locales?: Array<string>;
};

export type DeleteV0PluginData = {
    body?: never;
    path?: never;
    query: {
        name: string;
    };
    url: '/v0/plugin';
};

export type DeleteV0PluginResponses = {
    /**
     * Whether the plugin was successfully deleted
     */
    200: {
        deleted: boolean;
        msg?: string;
    };
};

export type DeleteV0PluginResponse = DeleteV0PluginResponses[keyof DeleteV0PluginResponses];

export type GetV0PluginData = {
    body?: never;
    path?: never;
    query?: never;
    url: '/v0/plugin';
};

export type GetV0PluginResponses = {
    /**
     * List of plugins
     */
    200: {
        docLoaders: Array<{
            name: string;
            pluginType: 'DocLoader';
            exts: Array<string>;
        }>;
        docSplitter: {
            name: string;
            pluginType: 'DocSplitter';
        };
    };
};

export type GetV0PluginResponse = GetV0PluginResponses[keyof GetV0PluginResponses];

export type PutV0PluginData = {
    body?: unknown;
    path?: never;
    query: {
        name: string;
    };
    url: '/v0/plugin';
};

export type PutV0PluginResponses = {
    /**
     * Whether the plugin was successfully installed
     */
    200: {
        installed: boolean;
        msg?: string;
    };
};

export type PutV0PluginResponse = PutV0PluginResponses[keyof PutV0PluginResponses];

export type GetV0PluginExtData = {
    body?: never;
    path?: never;
    query?: never;
    url: '/v0/plugin/ext';
};

export type GetV0PluginExtResponses = {
    /**
     * Plugin-extension mapping
     */
    200: {
        [key: string]: string;
    };
};

export type GetV0PluginExtResponse = GetV0PluginExtResponses[keyof GetV0PluginExtResponses];

export type PatchV0PluginExtData = {
    body?: never;
    path?: never;
    query: {
        ext: string;
        docLoaderName?: string;
    };
    url: '/v0/plugin/ext';
};

export type PatchV0PluginExtResponses = {
    /**
     * Whether the mapping was successfully modified
     */
    200: {
        modified: boolean;
    };
};

export type PatchV0PluginExtResponse = PatchV0PluginExtResponses[keyof PatchV0PluginExtResponses];

export type PostV0DifyRetrievalData = {
    body?: DifyKnowledgeRequestSchema;
    path?: never;
    query?: never;
    url: '/v0/dify/retrieval';
};

export type PostV0DifyRetrievalErrors = {
    /**
     * AccessDeniedException
     */
    403: {
        error_code: '1002' | '1001';
        error_msg: string;
    };
    /**
     * KnowledgeDoesNotExist
     */
    404: {
        error_code: '2001';
        error_msg: string;
    };
};

export type PostV0DifyRetrievalError = PostV0DifyRetrievalErrors[keyof PostV0DifyRetrievalErrors];

export type PostV0DifyRetrievalResponses = {
    /**
     * Search results
     */
    200: {
        records: Array<DifyKnowledgeResponseRecordSchema>;
    };
};

export type PostV0DifyRetrievalResponse = PostV0DifyRetrievalResponses[keyof PostV0DifyRetrievalResponses];

export type PostV0BaseByKnowledgeIdSearchData = {
    body?: SearchParam;
    path: {
        knowledgeId: string;
    };
    query?: never;
    url: '/v0/base/{knowledgeId}/search';
};

export type PostV0BaseByKnowledgeIdSearchErrors = {
    /**
     * KnowledgeDoesNotExist
     */
    404: {
        error_code: '2001';
        error_msg: string;
    };
};

export type PostV0BaseByKnowledgeIdSearchError = PostV0BaseByKnowledgeIdSearchErrors[keyof PostV0BaseByKnowledgeIdSearchErrors];

export type PostV0BaseByKnowledgeIdSearchResponses = {
    /**
     * Search results
     */
    200: SearchResults;
};

export type PostV0BaseByKnowledgeIdSearchResponse = PostV0BaseByKnowledgeIdSearchResponses[keyof PostV0BaseByKnowledgeIdSearchResponses];

export type DeleteV0BaseData = {
    body?: {
        id: string;
    };
    path?: never;
    query?: never;
    url: '/v0/base';
};

export type DeleteV0BaseResponses = {
    /**
     * del base status
     */
    200: {
        deleted: boolean;
    };
};

export type DeleteV0BaseResponse = DeleteV0BaseResponses[keyof DeleteV0BaseResponses];

export type GetV0BaseData = {
    body?: never;
    path?: never;
    query?: never;
    url: '/v0/base';
};

export type GetV0BaseResponses = {
    /**
     * all base
     */
    200: Array<{
        name: string;
        id: string;
        path: string;
    }>;
};

export type GetV0BaseResponse = GetV0BaseResponses[keyof GetV0BaseResponses];

export type PutV0BaseData = {
    body?: {
        name: string;
    };
    path?: never;
    query?: never;
    url: '/v0/base';
};

export type PutV0BaseResponses = {
    /**
     * added base
     */
    200: {
        name: string;
        id: string;
        path: string;
    };
};

export type PutV0BaseResponse = PutV0BaseResponses[keyof PutV0BaseResponses];

export type DeleteV0BaseByKnowledgeIdEmbedderData = {
    body?: never;
    path: {
        knowledgeId: string;
    };
    query?: never;
    url: '/v0/base/{knowledgeId}/embedder';
};

export type DeleteV0BaseByKnowledgeIdEmbedderResponses = {
    /**
     * Embedders reset successfully
     */
    200: {
        status: 'succeeded' | 'processing' | 'failed' | 'enqueued' | 'canceled';
    };
};

export type DeleteV0BaseByKnowledgeIdEmbedderResponse = DeleteV0BaseByKnowledgeIdEmbedderResponses[keyof DeleteV0BaseByKnowledgeIdEmbedderResponses];

export type GetV0BaseByKnowledgeIdEmbedderData = {
    body?: never;
    path: {
        knowledgeId: string;
    };
    query?: never;
    url: '/v0/base/{knowledgeId}/embedder';
};

export type GetV0BaseByKnowledgeIdEmbedderResponses = {
    /**
     * Embedders
     */
    200: {
        [key: string]: {
            source: 'openAi';
            model?: string;
            apiKey?: string;
            documentTemplate?: string;
            dimensions?: number;
            distribution?: {
                mean: number;
                sigma: number;
            };
            url?: string;
            documentTemplateMaxBytes?: number;
            binaryQuantized?: boolean;
        } | {
            source: 'huggingFace';
            model?: string;
            revision?: string;
            documentTemplate?: string;
            distribution?: {
                mean: number;
                sigma: number;
            };
            documentTemplateMaxBytes?: number;
            binaryQuantized?: boolean;
        } | {
            source: 'userProvided';
            dimensions: number;
            distribution?: {
                mean: number;
                sigma: number;
            };
            binaryQuantized?: boolean;
        } | {
            source: 'rest';
            url: string;
            apiKey?: string;
            dimensions?: number;
            documentTemplate?: string;
            distribution?: {
                mean: number;
                sigma: number;
            };
            request: {};
            response: {};
            headers?: {
                [key: string]: string;
            };
            documentTemplateMaxBytes?: number;
            binaryQuantized?: boolean;
        } | {
            source: 'ollama';
            url?: string;
            apiKey?: string;
            model?: string;
            documentTemplate?: string;
            distribution?: {
                mean: number;
                sigma: number;
            };
            dimensions?: number;
            documentTemplateMaxBytes?: number;
            binaryQuantized?: boolean;
        } | null;
    } | null;
};

export type GetV0BaseByKnowledgeIdEmbedderResponse = GetV0BaseByKnowledgeIdEmbedderResponses[keyof GetV0BaseByKnowledgeIdEmbedderResponses];

export type PostV0BaseByKnowledgeIdEmbedderData = {
    body?: {
        embedders: {
            [key: string]: {
                source: 'openAi';
                model?: string;
                apiKey?: string;
                documentTemplate?: string;
                dimensions?: number;
                distribution?: {
                    mean: number;
                    sigma: number;
                };
                url?: string;
                documentTemplateMaxBytes?: number;
                binaryQuantized?: boolean;
            } | {
                source: 'huggingFace';
                model?: string;
                revision?: string;
                documentTemplate?: string;
                distribution?: {
                    mean: number;
                    sigma: number;
                };
                documentTemplateMaxBytes?: number;
                binaryQuantized?: boolean;
            } | {
                source: 'userProvided';
                dimensions: number;
                distribution?: {
                    mean: number;
                    sigma: number;
                };
                binaryQuantized?: boolean;
            } | {
                source: 'rest';
                url: string;
                apiKey?: string;
                dimensions?: number;
                documentTemplate?: string;
                distribution?: {
                    mean: number;
                    sigma: number;
                };
                request: {};
                response: {};
                headers?: {
                    [key: string]: string;
                };
                documentTemplateMaxBytes?: number;
                binaryQuantized?: boolean;
            } | {
                source: 'ollama';
                url?: string;
                apiKey?: string;
                model?: string;
                documentTemplate?: string;
                distribution?: {
                    mean: number;
                    sigma: number;
                };
                dimensions?: number;
                documentTemplateMaxBytes?: number;
                binaryQuantized?: boolean;
            } | null;
        } | null;
    };
    path: {
        knowledgeId: string;
    };
    query?: never;
    url: '/v0/base/{knowledgeId}/embedder';
};

export type PostV0BaseByKnowledgeIdEmbedderResponses = {
    /**
     * Embedder updated successfully
     */
    200: {
        status: 'succeeded' | 'processing' | 'failed' | 'enqueued' | 'canceled';
    };
};

export type PostV0BaseByKnowledgeIdEmbedderResponse = PostV0BaseByKnowledgeIdEmbedderResponses[keyof PostV0BaseByKnowledgeIdEmbedderResponses];

export type GetSystemData = {
    body?: never;
    path?: never;
    query?: never;
    url: '/system';
};

export type GetSystemResponses = {
    /**
     * system inited or not
     */
    200: {
        inited: boolean;
        webdav: boolean;
    };
};

export type GetSystemResponse = GetSystemResponses[keyof GetSystemResponses];

export type PostSystemData = {
    body?: {
        host: string;
        apiKey: string;
    };
    path?: never;
    query?: never;
    url: '/system';
};

export type PostSystemErrors = {
    /**
     * system has already inited
     */
    400: {
        inited: boolean;
        webdav: boolean;
        msg: string;
    };
};

export type PostSystemError = PostSystemErrors[keyof PostSystemErrors];

export type PostSystemResponses = {
    /**
     * system inited successfully
     */
    200: {
        inited: true;
        webdav: boolean;
    };
};

export type PostSystemResponse = PostSystemResponses[keyof PostSystemResponses];

export type ClientOptions = {
    baseUrl: `${string}://client` | (string & {});
};